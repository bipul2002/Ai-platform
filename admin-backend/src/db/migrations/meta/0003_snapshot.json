{
  "id": "736a1bc6-11a0-4199-9803-05259ce95a49",
  "prevId": "ce7b5459-25b2-4837-b3b7-c48535248e62",
  "version": "5",
  "dialect": "pg",
  "tables": {
    "admin_users": {
      "name": "admin_users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "password_hash": {
          "name": "password_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "refresh_token_hash": {
          "name": "refresh_token_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "primaryKey": false,
          "notNull": true,
          "default": "'viewer'"
        },
        "first_name": {
          "name": "first_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "last_name": {
          "name": "last_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "password_changed_at": {
          "name": "password_changed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "failed_login_attempts": {
          "name": "failed_login_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "locked_until": {
          "name": "locked_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_admin_users_email": {
          "name": "idx_admin_users_email",
          "columns": [
            "email"
          ],
          "isUnique": true
        },
        "idx_admin_users_role": {
          "name": "idx_admin_users_role",
          "columns": [
            "role"
          ],
          "isUnique": false
        },
        "idx_admin_users_org_id": {
          "name": "idx_admin_users_org_id",
          "columns": [
            "organization_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "admin_users_organization_id_organizations_id_fk": {
          "name": "admin_users_organization_id_organizations_id_fk",
          "tableFrom": "admin_users",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "admin_users_email_unique": {
          "name": "admin_users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      }
    },
    "agent_columns": {
      "name": "agent_columns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "table_id": {
          "name": "table_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "column_name": {
          "name": "column_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "data_type": {
          "name": "data_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "is_nullable": {
          "name": "is_nullable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_primary_key": {
          "name": "is_primary_key",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_foreign_key": {
          "name": "is_foreign_key",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_unique": {
          "name": "is_unique",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_indexed": {
          "name": "is_indexed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "default_value": {
          "name": "default_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "original_comment": {
          "name": "original_comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_description": {
          "name": "admin_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_notes": {
          "name": "admin_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "semantic_hints": {
          "name": "semantic_hints",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_prompt": {
          "name": "custom_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sample_values": {
          "name": "sample_values",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "value_distribution": {
          "name": "value_distribution",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_visible": {
          "name": "is_visible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_queryable": {
          "name": "is_queryable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_sensitive": {
          "name": "is_sensitive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "sensitivity_override": {
          "name": "sensitivity_override",
          "type": "sensitivity_level",
          "primaryKey": false,
          "notNull": false
        },
        "masking_strategy_override": {
          "name": "masking_strategy_override",
          "type": "masking_strategy",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_columns_agent_id": {
          "name": "idx_agent_columns_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_agent_columns_table_id": {
          "name": "idx_agent_columns_table_id",
          "columns": [
            "table_id"
          ],
          "isUnique": false
        },
        "idx_agent_columns_name": {
          "name": "idx_agent_columns_name",
          "columns": [
            "column_name"
          ],
          "isUnique": false
        },
        "idx_agent_columns_sensitive": {
          "name": "idx_agent_columns_sensitive",
          "columns": [
            "is_sensitive"
          ],
          "isUnique": false
        },
        "unique_table_column": {
          "name": "unique_table_column",
          "columns": [
            "table_id",
            "column_name"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "agent_columns_agent_id_agents_id_fk": {
          "name": "agent_columns_agent_id_agents_id_fk",
          "tableFrom": "agent_columns",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_columns_table_id_agent_tables_id_fk": {
          "name": "agent_columns_table_id_agent_tables_id_fk",
          "tableFrom": "agent_columns",
          "tableTo": "agent_tables",
          "columnsFrom": [
            "table_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "agent_external_db_credentials": {
      "name": "agent_external_db_credentials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "db_type": {
          "name": "db_type",
          "type": "db_type",
          "primaryKey": false,
          "notNull": true
        },
        "host": {
          "name": "host",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "port": {
          "name": "port",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "database_name": {
          "name": "database_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "encrypted_password": {
          "name": "encrypted_password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ssl_enabled": {
          "name": "ssl_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "ssl_ca_cert": {
          "name": "ssl_ca_cert",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ssl_client_cert": {
          "name": "ssl_client_cert",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ssl_client_key": {
          "name": "ssl_client_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "connection_pool_size": {
          "name": "connection_pool_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 5
        },
        "connection_timeout_ms": {
          "name": "connection_timeout_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 5000
        },
        "schema_filter_include": {
          "name": "schema_filter_include",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": []
        },
        "schema_filter_exclude": {
          "name": "schema_filter_exclude",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": []
        },
        "last_connection_test_at": {
          "name": "last_connection_test_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_connection_test_success": {
          "name": "last_connection_test_success",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_ext_db_agent_id": {
          "name": "idx_agent_ext_db_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "agent_external_db_credentials_agent_id_agents_id_fk": {
          "name": "agent_external_db_credentials_agent_id_agents_id_fk",
          "tableFrom": "agent_external_db_credentials",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "agent_external_db_credentials_agent_id_unique": {
          "name": "agent_external_db_credentials_agent_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "agent_id"
          ]
        }
      }
    },
    "agent_relationships": {
      "name": "agent_relationships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_table_id": {
          "name": "source_table_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_column_id": {
          "name": "source_column_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "target_table_id": {
          "name": "target_table_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "target_column_id": {
          "name": "target_column_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'foreign_key'"
        },
        "is_inferred": {
          "name": "is_inferred",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "confidence_score": {
          "name": "confidence_score",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "original_constraint_name": {
          "name": "original_constraint_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "admin_description": {
          "name": "admin_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_notes": {
          "name": "admin_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_relationships_agent_id": {
          "name": "idx_agent_relationships_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_agent_relationships_source_table": {
          "name": "idx_agent_relationships_source_table",
          "columns": [
            "source_table_id"
          ],
          "isUnique": false
        },
        "idx_agent_relationships_target_table": {
          "name": "idx_agent_relationships_target_table",
          "columns": [
            "target_table_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "agent_relationships_agent_id_agents_id_fk": {
          "name": "agent_relationships_agent_id_agents_id_fk",
          "tableFrom": "agent_relationships",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_relationships_source_table_id_agent_tables_id_fk": {
          "name": "agent_relationships_source_table_id_agent_tables_id_fk",
          "tableFrom": "agent_relationships",
          "tableTo": "agent_tables",
          "columnsFrom": [
            "source_table_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_relationships_source_column_id_agent_columns_id_fk": {
          "name": "agent_relationships_source_column_id_agent_columns_id_fk",
          "tableFrom": "agent_relationships",
          "tableTo": "agent_columns",
          "columnsFrom": [
            "source_column_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_relationships_target_table_id_agent_tables_id_fk": {
          "name": "agent_relationships_target_table_id_agent_tables_id_fk",
          "tableFrom": "agent_relationships",
          "tableTo": "agent_tables",
          "columnsFrom": [
            "target_table_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_relationships_target_column_id_agent_columns_id_fk": {
          "name": "agent_relationships_target_column_id_agent_columns_id_fk",
          "tableFrom": "agent_relationships",
          "tableTo": "agent_columns",
          "columnsFrom": [
            "target_column_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "agent_tables": {
      "name": "agent_tables",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "table_name": {
          "name": "table_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "schema_name": {
          "name": "schema_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "default": "'public'"
        },
        "original_comment": {
          "name": "original_comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_description": {
          "name": "admin_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_notes": {
          "name": "admin_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "semantic_hints": {
          "name": "semantic_hints",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_prompt": {
          "name": "custom_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_visible": {
          "name": "is_visible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_queryable": {
          "name": "is_queryable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "row_count_estimate": {
          "name": "row_count_estimate",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "last_analyzed_at": {
          "name": "last_analyzed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_tables_agent_id": {
          "name": "idx_agent_tables_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_agent_tables_name": {
          "name": "idx_agent_tables_name",
          "columns": [
            "table_name"
          ],
          "isUnique": false
        },
        "unique_agent_table": {
          "name": "unique_agent_table",
          "columns": [
            "agent_id",
            "schema_name",
            "table_name"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "agent_tables_agent_id_agents_id_fk": {
          "name": "agent_tables_agent_id_agents_id_fk",
          "tableFrom": "agent_tables",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "agents": {
      "name": "agents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": []
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "query_count": {
          "name": "query_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "custom_dictionary": {
          "name": "custom_dictionary",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "system_prompt_override": {
          "name": "system_prompt_override",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_results_limit": {
          "name": "max_results_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1000
        },
        "timeout_seconds": {
          "name": "timeout_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 30
        },
        "llm_provider": {
          "name": "llm_provider",
          "type": "llm_provider",
          "primaryKey": false,
          "notNull": false,
          "default": "'openai'"
        },
        "llm_model": {
          "name": "llm_model",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "default": "'gpt-4-turbo-preview'"
        },
        "llm_temperature": {
          "name": "llm_temperature",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agents_name": {
          "name": "idx_agents_name",
          "columns": [
            "name"
          ],
          "isUnique": false
        },
        "idx_agents_is_active": {
          "name": "idx_agents_is_active",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        },
        "idx_agents_created_by": {
          "name": "idx_agents_created_by",
          "columns": [
            "created_by"
          ],
          "isUnique": false
        },
        "idx_agents_org_id": {
          "name": "idx_agents_org_id",
          "columns": [
            "organization_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "agents_organization_id_organizations_id_fk": {
          "name": "agents_organization_id_organizations_id_fk",
          "tableFrom": "agents",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agents_created_by_admin_users_id_fk": {
          "name": "agents_created_by_admin_users_id_fk",
          "tableFrom": "agents",
          "tableTo": "admin_users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "conversations": {
      "name": "conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "default": "'New Conversation'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_conversations_agent_id": {
          "name": "idx_conversations_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_conversations_user_id": {
          "name": "idx_conversations_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "conversations_agent_id_agents_id_fk": {
          "name": "conversations_agent_id_agents_id_fk",
          "tableFrom": "conversations",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "conversations_user_id_admin_users_id_fk": {
          "name": "conversations_user_id_admin_users_id_fk",
          "tableFrom": "conversations",
          "tableTo": "admin_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "magic_links": {
      "name": "magic_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "used": {
          "name": "used",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_magic_links_token": {
          "name": "idx_magic_links_token",
          "columns": [
            "token"
          ],
          "isUnique": false
        },
        "idx_magic_links_user_id": {
          "name": "idx_magic_links_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "magic_links_user_id_admin_users_id_fk": {
          "name": "magic_links_user_id_admin_users_id_fk",
          "tableFrom": "magic_links",
          "tableTo": "admin_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "messages": {
      "name": "messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "conversation_role",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "thread_id": {
          "name": "thread_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_messages_conversation_id": {
          "name": "idx_messages_conversation_id",
          "columns": [
            "conversation_id"
          ],
          "isUnique": false
        },
        "idx_messages_created_at": {
          "name": "idx_messages_created_at",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "idx_messages_thread_id": {
          "name": "idx_messages_thread_id",
          "columns": [
            "thread_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "messages_conversation_id_conversations_id_fk": {
          "name": "messages_conversation_id_conversations_id_fk",
          "tableFrom": "messages",
          "tableTo": "conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "organizations": {
      "name": "organizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_organizations_slug": {
          "name": "idx_organizations_slug",
          "columns": [
            "slug"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "organizations_slug_unique": {
          "name": "organizations_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        }
      }
    },
    "query_threads": {
      "name": "query_threads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "thread_id": {
          "name": "thread_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "initial_query": {
          "name": "initial_query",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "current_sql": {
          "name": "current_sql",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "iteration_count": {
          "name": "iteration_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_query_threads_conversation": {
          "name": "idx_query_threads_conversation",
          "columns": [
            "conversation_id"
          ],
          "isUnique": false
        },
        "idx_query_threads_thread_id": {
          "name": "idx_query_threads_thread_id",
          "columns": [
            "thread_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "query_threads_conversation_id_conversations_id_fk": {
          "name": "query_threads_conversation_id_conversations_id_fk",
          "tableFrom": "query_threads",
          "tableTo": "conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "query_threads_thread_id_unique": {
          "name": "query_threads_thread_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "thread_id"
          ]
        }
      }
    },
    "agent_additional_metadata": {
      "name": "agent_additional_metadata",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "metadata_type": {
          "name": "metadata_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "target_type": {
          "name": "target_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "target_id": {
          "name": "target_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_metadata_agent_id": {
          "name": "idx_agent_metadata_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_agent_metadata_target": {
          "name": "idx_agent_metadata_target",
          "columns": [
            "target_type",
            "target_id"
          ],
          "isUnique": false
        },
        "unique_agent_metadata": {
          "name": "unique_agent_metadata",
          "columns": [
            "agent_id",
            "target_type",
            "target_id",
            "key"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "agent_additional_metadata_agent_id_agents_id_fk": {
          "name": "agent_additional_metadata_agent_id_agents_id_fk",
          "tableFrom": "agent_additional_metadata",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_additional_metadata_created_by_admin_users_id_fk": {
          "name": "agent_additional_metadata_created_by_admin_users_id_fk",
          "tableFrom": "agent_additional_metadata",
          "tableTo": "admin_users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "agent_schema_embeddings": {
      "name": "agent_schema_embeddings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "target_type": {
          "name": "target_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "target_id": {
          "name": "target_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "embedding_text": {
          "name": "embedding_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "embedding_vector": {
          "name": "embedding_vector",
          "type": "vector(1536)",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_model": {
          "name": "embedding_model",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "default": "'text-embedding-3-small'"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_schema_embeddings_agent_id": {
          "name": "idx_schema_embeddings_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_schema_embeddings_target": {
          "name": "idx_schema_embeddings_target",
          "columns": [
            "target_type",
            "target_id"
          ],
          "isUnique": false
        },
        "unique_agent_embedding": {
          "name": "unique_agent_embedding",
          "columns": [
            "agent_id",
            "target_type",
            "target_id"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "agent_schema_embeddings_agent_id_agents_id_fk": {
          "name": "agent_schema_embeddings_agent_id_agents_id_fk",
          "tableFrom": "agent_schema_embeddings",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "audit_action",
          "primaryKey": false,
          "notNull": true
        },
        "resource_type": {
          "name": "resource_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "resource_id": {
          "name": "resource_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_success": {
          "name": "is_success",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_audit_logs_agent_id": {
          "name": "idx_audit_logs_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_audit_logs_user_id": {
          "name": "idx_audit_logs_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_audit_logs_action": {
          "name": "idx_audit_logs_action",
          "columns": [
            "action"
          ],
          "isUnique": false
        },
        "idx_audit_logs_created_at": {
          "name": "idx_audit_logs_created_at",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "idx_audit_logs_resource": {
          "name": "idx_audit_logs_resource",
          "columns": [
            "resource_type",
            "resource_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "audit_logs_agent_id_agents_id_fk": {
          "name": "audit_logs_agent_id_agents_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "audit_logs_user_id_admin_users_id_fk": {
          "name": "audit_logs_user_id_admin_users_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "admin_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "chat_sessions": {
      "name": "chat_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_token": {
          "name": "session_token",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "context": {
          "name": "context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "message_count": {
          "name": "message_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_chat_sessions_agent_id": {
          "name": "idx_chat_sessions_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_chat_sessions_token": {
          "name": "idx_chat_sessions_token",
          "columns": [
            "session_token"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "chat_sessions_agent_id_agents_id_fk": {
          "name": "chat_sessions_agent_id_agents_id_fk",
          "tableFrom": "chat_sessions",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "chat_sessions_session_token_unique": {
          "name": "chat_sessions_session_token_unique",
          "nullsNotDistinct": false,
          "columns": [
            "session_token"
          ]
        }
      }
    },
    "forbidden_fields": {
      "name": "forbidden_fields",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "scope": {
          "name": "scope",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'agent'"
        },
        "table_pattern": {
          "name": "table_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "column_pattern": {
          "name": "column_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_forbidden_fields_agent_id": {
          "name": "idx_forbidden_fields_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_forbidden_fields_scope": {
          "name": "idx_forbidden_fields_scope",
          "columns": [
            "scope"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "forbidden_fields_agent_id_agents_id_fk": {
          "name": "forbidden_fields_agent_id_agents_id_fk",
          "tableFrom": "forbidden_fields",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "forbidden_fields_created_by_admin_users_id_fk": {
          "name": "forbidden_fields_created_by_admin_users_id_fk",
          "tableFrom": "forbidden_fields",
          "tableTo": "admin_users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "query_history": {
      "name": "query_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "user_message": {
          "name": "user_message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "canonical_query": {
          "name": "canonical_query",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "generated_sql": {
          "name": "generated_sql",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sql_dialect": {
          "name": "sql_dialect",
          "type": "db_type",
          "primaryKey": false,
          "notNull": false
        },
        "execution_time_ms": {
          "name": "execution_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "row_count": {
          "name": "row_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_success": {
          "name": "is_success",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "validation_errors": {
          "name": "validation_errors",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "sanitization_applied": {
          "name": "sanitization_applied",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "thread_id": {
          "name": "thread_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "is_refinement": {
          "name": "is_refinement",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "iteration_count": {
          "name": "iteration_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_query_history_agent_id": {
          "name": "idx_query_history_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_query_history_session_id": {
          "name": "idx_query_history_session_id",
          "columns": [
            "session_id"
          ],
          "isUnique": false
        },
        "idx_query_history_created_at": {
          "name": "idx_query_history_created_at",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "idx_query_history_success": {
          "name": "idx_query_history_success",
          "columns": [
            "is_success"
          ],
          "isUnique": false
        },
        "idx_query_history_thread_id": {
          "name": "idx_query_history_thread_id",
          "columns": [
            "thread_id"
          ],
          "isUnique": false
        },
        "idx_query_history_is_refinement": {
          "name": "idx_query_history_is_refinement",
          "columns": [
            "is_refinement"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "query_history_agent_id_agents_id_fk": {
          "name": "query_history_agent_id_agents_id_fk",
          "tableFrom": "query_history",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "query_llm_calls": {
      "name": "query_llm_calls",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "query_history_id": {
          "name": "query_history_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "node_name": {
          "name": "node_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "llm_provider": {
          "name": "llm_provider",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "llm_model": {
          "name": "llm_model",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "system_prompt": {
          "name": "system_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt": {
          "name": "prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "response": {
          "name": "response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "llm_config": {
          "name": "llm_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "token_usage": {
          "name": "token_usage",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_llm_calls_query_id": {
          "name": "idx_llm_calls_query_id",
          "columns": [
            "query_history_id"
          ],
          "isUnique": false
        },
        "idx_llm_calls_node_name": {
          "name": "idx_llm_calls_node_name",
          "columns": [
            "node_name"
          ],
          "isUnique": false
        },
        "idx_llm_calls_provider": {
          "name": "idx_llm_calls_provider",
          "columns": [
            "llm_provider"
          ],
          "isUnique": false
        },
        "idx_llm_calls_model": {
          "name": "idx_llm_calls_model",
          "columns": [
            "llm_model"
          ],
          "isUnique": false
        },
        "idx_llm_calls_created_at": {
          "name": "idx_llm_calls_created_at",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "query_llm_calls_query_history_id_query_history_id_fk": {
          "name": "query_llm_calls_query_history_id_query_history_id_fk",
          "tableFrom": "query_llm_calls",
          "tableTo": "query_history",
          "columnsFrom": [
            "query_history_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "query_pipeline_execution": {
      "name": "query_pipeline_execution",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "query_history_id": {
          "name": "query_history_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "node_name": {
          "name": "node_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "execution_order": {
          "name": "execution_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "node_state": {
          "name": "node_state",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_pipeline_exec_query_id": {
          "name": "idx_pipeline_exec_query_id",
          "columns": [
            "query_history_id"
          ],
          "isUnique": false
        },
        "idx_pipeline_exec_node_name": {
          "name": "idx_pipeline_exec_node_name",
          "columns": [
            "node_name"
          ],
          "isUnique": false
        },
        "idx_pipeline_exec_started_at": {
          "name": "idx_pipeline_exec_started_at",
          "columns": [
            "started_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "query_pipeline_execution_query_history_id_query_history_id_fk": {
          "name": "query_pipeline_execution_query_history_id_query_history_id_fk",
          "tableFrom": "query_pipeline_execution",
          "tableTo": "query_history",
          "columnsFrom": [
            "query_history_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "refresh_tokens": {
      "name": "refresh_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "token_hash": {
          "name": "token_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "is_revoked": {
          "name": "is_revoked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_refresh_tokens_user_id": {
          "name": "idx_refresh_tokens_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_refresh_tokens_hash": {
          "name": "idx_refresh_tokens_hash",
          "columns": [
            "token_hash"
          ],
          "isUnique": false
        },
        "idx_refresh_tokens_expires": {
          "name": "idx_refresh_tokens_expires",
          "columns": [
            "expires_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "refresh_tokens_user_id_admin_users_id_fk": {
          "name": "refresh_tokens_user_id_admin_users_id_fk",
          "tableFrom": "refresh_tokens",
          "tableTo": "admin_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "refresh_tokens_token_hash_unique": {
          "name": "refresh_tokens_token_hash_unique",
          "nullsNotDistinct": false,
          "columns": [
            "token_hash"
          ]
        }
      }
    },
    "sensitive_field_registry_agent": {
      "name": "sensitive_field_registry_agent",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "column_id": {
          "name": "column_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "pattern_type": {
          "name": "pattern_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "pattern_value": {
          "name": "pattern_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pattern_regex": {
          "name": "pattern_regex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sensitivity_level": {
          "name": "sensitivity_level",
          "type": "sensitivity_level",
          "primaryKey": false,
          "notNull": true,
          "default": "'high'"
        },
        "masking_strategy": {
          "name": "masking_strategy",
          "type": "masking_strategy",
          "primaryKey": false,
          "notNull": true,
          "default": "'full'"
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_sensitivity_agent_id": {
          "name": "idx_agent_sensitivity_agent_id",
          "columns": [
            "agent_id"
          ],
          "isUnique": false
        },
        "idx_agent_sensitivity_column_id": {
          "name": "idx_agent_sensitivity_column_id",
          "columns": [
            "column_id"
          ],
          "isUnique": false
        },
        "idx_agent_sensitivity_active": {
          "name": "idx_agent_sensitivity_active",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "sensitive_field_registry_agent_agent_id_agents_id_fk": {
          "name": "sensitive_field_registry_agent_agent_id_agents_id_fk",
          "tableFrom": "sensitive_field_registry_agent",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "sensitive_field_registry_agent_column_id_agent_columns_id_fk": {
          "name": "sensitive_field_registry_agent_column_id_agent_columns_id_fk",
          "tableFrom": "sensitive_field_registry_agent",
          "tableTo": "agent_columns",
          "columnsFrom": [
            "column_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "sensitive_field_registry_agent_created_by_admin_users_id_fk": {
          "name": "sensitive_field_registry_agent_created_by_admin_users_id_fk",
          "tableFrom": "sensitive_field_registry_agent",
          "tableTo": "admin_users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "sensitive_field_registry_global": {
      "name": "sensitive_field_registry_global",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pattern_type": {
          "name": "pattern_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "pattern_value": {
          "name": "pattern_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pattern_regex": {
          "name": "pattern_regex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sensitivity_level": {
          "name": "sensitivity_level",
          "type": "sensitivity_level",
          "primaryKey": false,
          "notNull": true,
          "default": "'high'"
        },
        "masking_strategy": {
          "name": "masking_strategy",
          "type": "masking_strategy",
          "primaryKey": false,
          "notNull": true,
          "default": "'full'"
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_global_sensitivity_pattern": {
          "name": "idx_global_sensitivity_pattern",
          "columns": [
            "pattern_type",
            "pattern_value"
          ],
          "isUnique": false
        },
        "idx_global_sensitivity_active": {
          "name": "idx_global_sensitivity_active",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "sensitive_field_registry_global_created_by_admin_users_id_fk": {
          "name": "sensitive_field_registry_global_created_by_admin_users_id_fk",
          "tableFrom": "sensitive_field_registry_global",
          "tableTo": "admin_users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "agent_overview": {
      "name": "agent_overview",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "query_count": {
          "name": "query_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "db_type": {
          "name": "db_type",
          "type": "db_type",
          "primaryKey": false,
          "notNull": false
        },
        "host": {
          "name": "host",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "database_name": {
          "name": "database_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "last_connection_test_success": {
          "name": "last_connection_test_success",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "table_count": {
          "name": "table_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "column_count": {
          "name": "column_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_count": {
          "name": "embedding_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "audit_log_summary": {
      "name": "audit_log_summary",
      "schema": "",
      "columns": {
        "log_date": {
          "name": "log_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "audit_action",
          "primaryKey": false,
          "notNull": false
        },
        "action_count": {
          "name": "action_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "success_count": {
          "name": "success_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "failure_count": {
          "name": "failure_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "avg_duration_ms": {
          "name": "avg_duration_ms",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    }
  },
  "enums": {
    "audit_action": {
      "name": "audit_action",
      "values": {
        "agent_created": "agent_created",
        "agent_updated": "agent_updated",
        "agent_deleted": "agent_deleted",
        "schema_ingested": "schema_ingested",
        "schema_updated": "schema_updated",
        "embedding_generated": "embedding_generated",
        "embedding_updated": "embedding_updated",
        "sensitivity_rule_created": "sensitivity_rule_created",
        "sensitivity_rule_updated": "sensitivity_rule_updated",
        "sensitivity_rule_deleted": "sensitivity_rule_deleted",
        "query_executed": "query_executed",
        "query_failed": "query_failed",
        "user_login": "user_login",
        "user_logout": "user_logout",
        "config_updated": "config_updated",
        "metadata_updated": "metadata_updated"
      }
    },
    "conversation_role": {
      "name": "conversation_role",
      "values": {
        "user": "user",
        "assistant": "assistant",
        "system": "system"
      }
    },
    "db_type": {
      "name": "db_type",
      "values": {
        "postgresql": "postgresql",
        "mysql": "mysql"
      }
    },
    "llm_provider": {
      "name": "llm_provider",
      "values": {
        "openai": "openai",
        "anthropic": "anthropic"
      }
    },
    "masking_strategy": {
      "name": "masking_strategy",
      "values": {
        "full": "full",
        "partial": "partial",
        "hash": "hash",
        "redact": "redact",
        "tokenize": "tokenize"
      }
    },
    "sensitivity_level": {
      "name": "sensitivity_level",
      "values": {
        "low": "low",
        "medium": "medium",
        "high": "high",
        "critical": "critical"
      }
    },
    "user_role": {
      "name": "user_role",
      "values": {
        "super_admin": "super_admin",
        "admin": "admin",
        "viewer": "viewer"
      }
    }
  },
  "schemas": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}